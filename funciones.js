class Crud{constructor(e){this._datos=e}insertar(e,a){var t=document.getElementsByClassName("agregarInfo");let o=this;""!=t[0].value&&""!=t[2].value&&""!=t[3].value&&parseInt(t[2].value).toString()==t[2].value?(o._datos={token:token,id:a,nombre:t[0].value,descripcion:t[1].value,costo:t[2].value,fecha:t[3].value,tipo:t[4].value,dinero:t[5].value},$.ajax({data:o._datos,type:"POST",url:e,dataType:"json",success:function(e){o.validar(e)&&(BUSCAR_AUTO&&o.buscar("Agenda/buscar.php"),LIMPIAR_AUTO&&(t[0].value="",t[1].value="",t[2].value=""),$("#agregarInfoAgregado").fadeIn(TIEMPO_NOTIFICACION_OK).delay(TIEMPO_NOTIFICACION_OK).fadeTo(TIEMPO_NOTIFICACION_OK,0,function(){this.style.display="none",this.style.opacity="1"}),t[6].innerHTML="",t[6].value=null,o.autocompletar("Agenda/autocompletar.php"))}})):$("#agregarInfoRevisar").fadeIn(TIEMPO_NOTIFICACION).delay(TIEMPO_NOTIFICACION).fadeTo(TIEMPO_NOTIFICACION,0,function(){this.style.display="none",this.style.opacity="1"})}buscar(e){var a=document.getElementsByClassName("busqueda"),t=!1,o=!1,s=0,n=0,r=0,d=0;let l=document.getElementById("resultadosBusqueda_ingresos"),i=document.getElementById("resultadosBusqueda_gastos"),u=this;switch(a[8].value){case"":t=!0,o=!0,l.style.display="",i.style.display="";break;case"ingresos":t=!0,l.style.display="",i.style.display="none";break;case"gastos":o=!0,l.style.display="none",i.style.display=""}u._datos={token:token,id:a[0].value,nombre:a[1].value,descripcion:a[2].value,costo:a[3].value,ano:a[4].value,mes:a[5].value,dia:a[6].value,tipo:a[7].value,desde:a[9].value,hasta:a[10].value},t&&(u._datos.dinero="ingresos",$.ajax({data:u._datos,type:"POST",url:e,dataType:"json",success:function(e){if(u.validar(e)){v_ingreso.datos=e;for(var a=0;a<e.length;a++)isNaN(parseInt(e[a].costo))||(parseInt(e[a].costo)<0?n+=parseInt(e[a].costo):s+=parseInt(e[a].costo));document.getElementById("ingreso").innerHTML="Ingresos: $"+s.toLocaleString()+",00 | Deuda: $"+n.toLocaleString()+",00",document.getElementById("dinero-disponible").innerHTML=s-r}}})),o&&(u._datos.dinero="gastos",$.ajax({data:u._datos,type:"POST",url:e,dataType:"json",success:function(e){if(u.validar(e)){v_gasto.datos=e;for(var a=0;a<e.length;a++)isNaN(parseInt(e[a].costo))||(parseInt(e[a].costo)<0?d+=parseInt(e[a].costo):r+=parseInt(e[a].costo));document.getElementById("gasto").innerHTML="Gastos: $"+r.toLocaleString()+",00 | Deuda: $"+d.toLocaleString()+",00",document.getElementById("dinero-disponible").innerHTML=s-r}}})),$("#resultadoBuscar").fadeIn(TIEMPO_NOTIFICACION_OK).delay(TIEMPO_NOTIFICACION_OK).fadeTo(TIEMPO_NOTIFICACION_OK,0,function(){this.style.display="none",this.style.opacity="1"})}pagar(e,a,t){var o=document.getElementsByClassName("busqueda");let s,n=this;"Agenda/pagar.php"==e&&(s="resultadoPagar"),"Agenda/deuda_pago.php"==e&&(s="resultadoDeuda"),n._datos={token:token,id:a,dinero:t,pago:o[11].value},$.ajax({data:n._datos,type:"POST",url:e,dataType:"json",success:function(e){n.validar(e)&&(o[0].value="",BUSCAR_AUTO&&n.buscar("Agenda/buscar.php"),$("#"+s).fadeIn(TIEMPO_NOTIFICACION_OK).delay(TIEMPO_NOTIFICACION_OK).fadeTo(TIEMPO_NOTIFICACION_OK,0,function(){this.style.display="none",this.style.opacity="1"}))}})}borrar(e,a,t){document.getElementsByClassName("busqueda");let o=this;o._datos={token:token,id:a,dinero:t},$.ajax({data:o._datos,type:"POST",url:e,dataType:"json",success:function(e){o.validar(e)&&(document.getElementsByClassName("busqueda")[0].value="",BUSCAR_AUTO&&o.buscar("Agenda/buscar.php"),o.autocompletar("Agenda/autocompletar.php"),$("#resultadoBorrar").fadeIn(TIEMPO_NOTIFICACION_OK).delay(TIEMPO_NOTIFICACION_OK).fadeTo(TIEMPO_NOTIFICACION_OK,0,function(){this.style.display="none",this.style.opacity="1"}))}})}autocompletar(e){let a=this;a._datos={token:token},$.ajax({data:a._datos,type:"POST",url:e,dataType:"json",success:function(e){a.validar(e)&&(void 0===e.nombreIngreso&&void 0===e.nombreGasto||(void 0===e.nombreIngreso||void 0===e.nombreGasto?(void 0!==e.nombreIngreso&&(v_entrada.datosGenerales.nombreIG=e.nombreIngreso),void 0!==e.nombreGasto&&(v_entrada.datosGenerales.nombreIG=e.nombreGasto)):v_entrada.datosGenerales.nombreIG=e.nombreIngreso.concat(e.nombreGasto)),void 0===e.descripcionIngreso&&void 0===e.descripcionGasto||(void 0===e.descripcionIngreso||void 0===e.descripcionGasto?(void 0!==e.descripcionIngreso&&(v_entrada.datosGenerales.descripcionIG=e.descripcionIngreso),void 0!==e.descripcionGasto&&(v_entrada.datosGenerales.descripcionIG=e.descripcionGasto)):v_entrada.datosGenerales.descripcionIG=e.descripcionIngreso.concat(e.descripcionGasto)))}})}copyToClipboard(){let e=document.createElement("textarea");document.body.appendChild(e),e.innerHTML=document.URL+"index.html?"+token,e.select(),document.execCommand("copy"),document.body.removeChild(e)}cerrarSesion(e){let a=this;a._datos={token:token},$.ajax({data:a._datos,type:"POST",url:e,dataType:"json",success:function(e){a.pedirIngreso()}})}validar(e){return 0!=e.valid||(this.pedirIngreso(),!1)}pedirIngreso(){document.getElementById("salir").style.display="none",document.getElementById("contenido").style.display="none",document.getElementById("login").style.display="block"}setDatosEdicion(e,a,t){let o=this;this._datos={token:token,id:a,dinero:t},$.ajax({data:this._datos,type:"POST",url:e,dataType:"json",success:function(e){if(o.validar(e)){e=e[0];var s=document.getElementsByClassName("agregarInfo");s[0].value=e.nombre,s[1].value=e.descripcion,s[2].value=e.costo,s[3].valueAsDate=new Date(e.fecha),s[4].value=e.tipo,s[5].value=t,s[6].value=a,s[6].innerHTML="actualizar"}}})}}class Login{constructor(e){this._datos=e}ingresar(e){var a=document.getElementsByClassName("login");this._datos={token:token,usuario:a[0].value,contrasena:a[1].value},$.ajax({data:this._datos,type:"POST",url:e,dataType:"json",success:function(e){e.valid&&(a[1].value="",TITULO&&(v_entrada.datosGenerales.titulo=e.titulo),v_entrada.datosGenerales.nombre=e.nombre,token=e.token,document.getElementById("salir").style.display="block",document.getElementById("contenido").style.display="block",document.getElementById("login").style.display="none",crud.autocompletar("Agenda/autocompletar.php"),BUSCAR_AUTO&&crud.buscar("Agenda/buscar.php"))}})}registrar(e){var a=document.getElementsByClassName("registro");0!=a[1].value.length?a[1].value.split(" ").length>1?alert("El nombre de usuario no debe contener espacios"):0!=a[2].value.length?a[2].value.split(" ").length>1?alert("La contraseña no debe contener espacios"):a[2].value==a[3].value?(this._datos={nombre:a[0].value,usuario:a[1].value,contrasena:a[2].value,titulo:a[4].value},$.ajax({data:this._datos,type:"POST",url:e,dataType:"json",success:function(e){switch(e.estadoUsuario){case"OK":alert("El usuario fue creado con éxito. Por favor digite su usuario y contraseña para ingresar"),a[2].value="",a[3].value="";break;case"No se pudo hacer crear el usuario":alert("No se pudo hacer crear el usuario");break;case"El usuario ya existe":alert("El usuario ya existe")}}})):alert("Las contraseñas no coinciden"):alert("Ingrese una contraseña"):alert("Ingrese un usuario")}abrirPestana(){window.open("index.html?"+token,"_blank")}}Vue.filter("currency",function(e){let a=[];isNaN(e)?(a=e.split("|"),e=a[1],a[0]=a[0]+"|"):a.push("");let t=(e/1).toFixed(2).replace(".",",");return a[0]+"$"+t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")});
